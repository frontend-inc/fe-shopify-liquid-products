{% assign show_vendor = show_vendor | default: false %}
{% assign image_ratio = image_ratio | default: 'aspect-square' %}

<article
  class="group relative"
  data-product-id="{{ product.id }}"
>
  <a href="{{ product.url }}" class="block overflow-hidden rounded-lg bg-muted {{ image_ratio }}">
    {% if product.featured_image %}
      <img
        src="{{ product.featured_image | img_url }}"
        alt="{{ product.featured_image.alt | escape | default: product.title }}"
        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
        loading="lazy"
      >
    {% else %}
      <div class="w-full h-full flex items-center justify-center bg-muted">
        <i class="ri-image-line text-5xl text-muted-foreground"></i>
      </div>
    {% endif %}
  </a>

  {% if product.compare_at_price > product.price %}
    <span class="absolute top-2 left-2 bg-destructive text-destructive-foreground text-xs font-medium px-2 py-1 rounded-md">
      Sale
    </span>
  {% endif %}

  {% unless product.available %}
    <span class="absolute top-2 right-2 bg-muted text-muted-foreground text-xs font-medium px-2 py-1 rounded-md">
      Sold Out
    </span>
  {% endunless %}

  <div class="mt-3 space-y-1">
    {% if show_vendor and product.vendor %}
      <p class="text-xs text-muted-foreground">{{ product.vendor }}</p>
    {% endif %}

    <h3 class="text-sm font-medium">
      <a href="{{ product.url }}" class="hover:underline">{{ product.title }}</a>
    </h3>

    <div class="flex items-center gap-2">
      <span class="text-sm font-semibold">{{ product.price | money }}</span>
      {% if product.compare_at_price > product.price %}
        <span class="text-sm text-muted-foreground line-through">{{ product.compare_at_price | money }}</span>
      {% endif %}
    </div>
  </div>
</article>
